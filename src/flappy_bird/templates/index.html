<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flappy Bird - 飞扬的小鸟</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
</head>
<body>
    <div class="container-fluid p-0">
        <!-- 游戏区域 -->
        <div class="game-container">
            <canvas id="gameCanvas" width="400" height="600"></canvas>
            
            <!-- 游戏UI覆盖层 -->
            <div class="game-ui">
                <!-- 分数显示 -->
                <div class="score-display hidden" id="scoreDisplay">
                    <div class="score-number">0</div>
                    <div class="speed-indicator">
                        <i class="fas fa-tachometer-alt"></i>
                        <span id="speedValue">1.0</span>x
                    </div>
                </div>
                
                <!-- 开始界面 -->
                <div class="game-screen" id="startScreen">
                    <div class="screen-content">
                        <h1 class="game-title">
                            <i class="fas fa-dove"></i>
                            Flappy Bird
                        </h1>
                        <p class="game-subtitle">飞扬的小鸟</p>
                        <div class="instructions">
                            <p><i class="fas fa-mouse-pointer"></i> 点击屏幕或按空格键让小鸟飞行</p>
                            <p><i class="fas fa-trophy"></i> 穿过管道获得分数</p>
                            <p><i class="fas fa-coins"></i> 收集金币获得5分奖励</p>
                            <p><i class="fas fa-tachometer-alt"></i> 游戏速度缓慢递增，最高3倍速度</p>
                        </div>
                        <button class="btn btn-primary btn-lg start-btn" id="startBtn">
                            <i class="fas fa-play"></i>
                            开始游戏
                        </button>
                        <button class="btn btn-outline-primary btn-lg" id="leaderboardBtn">
                            <i class="fas fa-medal"></i>
                            排行榜
                        </button>
                    </div>
                </div>
                
                <!-- 游戏结束界面 -->
                <div class="game-screen hidden" id="gameOverScreen">
                    <div class="screen-content">
                        <h2 class="game-over-title">
                            <i class="fas fa-skull-crossbones"></i>
                            游戏结束
                        </h2>
                        <div class="final-score">
                            <div class="score-label">本次得分</div>
                            <div class="score-value" id="finalScore">0</div>
                        </div>
                        <div class="best-score">
                            <div class="score-label">最高分</div>
                            <div class="score-value" id="bestScore">0</div>
                        </div>
                        <div class="medals" id="medalContainer">
                            <!-- 奖牌将通过JavaScript动态添加 -->
                        </div>
                        <div class="game-over-buttons">
                            <button class="btn btn-success btn-lg" id="restartBtn">
                                <i class="fas fa-redo"></i>
                                重新开始
                            </button>
                            <button class="btn btn-outline-primary" id="saveScoreBtn">
                                <i class="fas fa-save"></i>
                                保存分数
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- 暂停界面 -->
                <div class="game-screen hidden" id="pauseScreen">
                    <div class="screen-content">
                        <h2 class="pause-title">
                            <i class="fas fa-pause"></i>
                            游戏暂停
                        </h2>
                        <button class="btn btn-primary btn-lg" id="resumeBtn">
                            <i class="fas fa-play"></i>
                            继续游戏
                        </button>
                        <button class="btn btn-outline-primary" id="mainMenuBtn">
                            <i class="fas fa-home"></i>
                            返回主菜单
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- 游戏控制按钮 -->
            <div class="game-controls">
                <button class="control-btn" id="pauseBtn" title="暂停游戏">
                    <i class="fas fa-pause"></i>
                </button>
                <button class="control-btn" id="soundBtn" title="音效开关">
                    <i class="fas fa-volume-up"></i>
                </button>
                <button class="control-btn" id="fullscreenBtn" title="全屏">
                    <i class="fas fa-expand"></i>
                </button>
            </div>
        </div>
        
        <!-- 侧边栏 -->
        <div class="sidebar">
            <div class="sidebar-content">
                <h3 class="sidebar-title">
                    <i class="fas fa-info-circle"></i>
                    游戏信息
                </h3>
                
                <div class="game-stats">
                    <div class="stat-item">
                        <i class="fas fa-gamepad"></i>
                        <span>总游戏次数</span>
                        <span id="totalGames">0</span>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-trophy"></i>
                        <span>历史最高分</span>
                        <span id="highestScore">0</span>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-chart-line"></i>
                        <span>平均分数</span>
                        <span id="averageScore">0</span>
                    </div>
                </div>
                
                <div class="controls-info">
                    <h4>控制方式</h4>
                    <ul>
                        <li><i class="fas fa-mouse-pointer"></i> 点击屏幕</li>
                        <li><i class="fas fa-keyboard"></i> 空格键</li>
                        <li><i class="fas fa-hand-pointer"></i> 触摸屏幕</li>
                    </ul>
                </div>
                
                <div class="tips">
                    <h4>游戏技巧</h4>
                    <ul>
                        <li>保持节奏感，不要急躁</li>
                        <li>观察管道间距，提前判断</li>
                        <li>练习控制小鸟的飞行高度</li>
                        <li>专注于下一个管道口</li>
                        <li>游戏速度随分数缓慢递增</li>
                        <li>注意右上角的速度指示器</li>
                        <li>收集金币可获得5分奖励</li>
                        <li>速度最高增加到3倍</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 排行榜模态框 -->
    <div class="modal fade" id="leaderboardModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-medal"></i>
                        排行榜
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="leaderboard-content">
                        <div class="loading" id="leaderboardLoading">
                            <i class="fas fa-spinner fa-spin"></i>
                            加载中...
                        </div>
                        <div class="leaderboard-list" id="leaderboardList">
                            <!-- 排行榜内容将通过JavaScript动态填充 -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 保存分数模态框 -->
    <div class="modal fade" id="saveScoreModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-save"></i>
                        保存分数
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="saveScoreForm">
                        <div class="mb-3">
                            <label for="playerName" class="form-label">玩家姓名</label>
                            <input type="text" class="form-control" id="playerName" 
                                   placeholder="请输入您的姓名" maxlength="20" required>
                        </div>
                        <div class="mb-3">
                            <div class="score-info">
                                <span class="text-muted">本次得分：</span>
                                <span class="fw-bold" id="scoreToSave">0</span>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary" id="confirmSaveBtn">
                        <i class="fas fa-save"></i>
                        保存
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 加载必要的JavaScript库 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/game.js') }}"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html> 